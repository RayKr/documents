## 设备概况

需要在一个页面中显示某个防火分区内各个舱、舱内设备布局、设备状态、设备信息等内容，并且要求当防火分区切换时，响应切换显示对应防火分区内所有设备。

设备图标的颜色对应设备状态（开-绿色，关-灰色，报警-红色，故障-橙色，离线-灰），并支持设备状态变化后设备颜色要实时变化。

当舱内设备多于浏览器屏幕显示宽度时，需要支持当前舱横向拖动以供监控全部舱内设备，并且很像滚动条需支持鼠标滚轮操作。

## 设备概况编辑页

防火分区内的设备信息维护在后台，但是设备在舱内布局和IO值关联，都需要在前台设备概览页配置。所以要求设备概览页上显示的设备需要支持编辑模式，包括新建与删除舱，调整舱宽度和高度，舱内新增布局区域、删除布局区域、区域可拖动调整大小，区域内添加、删除设备、设备位置拖动，并需要支持可以将所有的布局、设备位置保存到数据库。

在选定防火分区下，如果没有任何舱，可以点击“初始化舱”新建一个舱，可以自定义名称、舱长度、舱高度，初始化的舱默认包含一个空区域，可以点击区域后边的“+”增加区域。在区域内右键点击，选择“删除区域”即可删除该区域，选择“添加新设备”，即可打开设备选择列表，按照设备类别索引，选择要添加的设备，点击确定后，即可将该设备添加至鼠标对应位置。鼠标拖动该设备可以自定义摆放位置，同时鼠标放置在区域右侧边缘，会出现可拖动标识，即可调整区域大小。在舱名称上右键菜单，可以点击“修改舱信息”修改舱名称、舱长度、舱高度等信息。添加完设备并调整好布局后，可以点击“保存”按钮保存设备布局信息。

设备与IO值的关联关系，需要在设备概况编辑页中维护。
绑定：通过PLC筛选出节点，再通过节点筛选出该节点下的所有点位，实现与列表的级联。选中需要绑定点位设备与需要的点位，进行绑定。同时维护设备信息中的是否唯一点位设备和设备点位个数的数据。
解绑：选中需要解绑的设备，列表会列出该设备的所有已绑定的点位数据，选择需要解除绑定的点位，进行解绑。但是若该点位已经上传数据，则不能进行解绑。同时维护设备信息中是否唯一点位设备和设备点位个数的数据，并添加一条变化记录数据。

## 设备详细页
设备概览页监控的是防火分区内所有设备是否报警、数值显示等概览信息，关于某个设备的详细信息（包括设备状态、IO数值、开关操作、设备位置示意图、报警信息、维护档案、安全须知、数据统计信息、通讯录、应急预案、维修记录等）的查看需要在设备详细页中显示、查看与操作。

设备概览页上点击某个设备，会跳转到该设备的详细信息页，该页面会高亮选中的设备，下部分显示该设备详细信息的Tab选项页，点击不同的tab标签可切换信息显示。其中状态信息又包含四个部分：该设备详细大图、设备属性信息、设备状态、开关操作、状态值、关联设备。关联设备上点击可以跳转到对应的详细信息页面，并且可以直接操作关联设备的开关操作。设备详细页右上角有扩展菜单按钮，点击后可以查看更多关于该设备的信息菜单，点击相应的链接即可在弹出框中显示对应的信息。

其中数据统计信息中，包含该设备点位记录及图表信息。选择设备，查看设备绑定的点位数据信息。可以选择不同的点位进行查看。如果点位类型是数据类型的会显示所有数据的数据报表和最近20条数据的数据图表（默认折线图，可以切换到柱状图查看）。如果设备是开关类型的，则点位选择只会有一个”开关”选项。并且数据图表tab页不再展示，只显示数据报表tab页面。

## 应急预案
应急预案菜单中，包含所有设备类型对应的应急预案方案。该页面中可以通过选择设备类型、应急预案方案列表来显示具体的预案内容，内容以列表形式展现。其中在内容下方显示摘要信息，点击摘要信息按钮，即可高亮所对应的预案条目。

## 设备状态、报警信息实时推送
整站状态栏上有全局报警信息数目及缩略信息显示，并且在设备概览页上的设备状态需要实时变化，所以需要在这两部分上加上变化信息的实时推送。

设备状态变化时，会接收后台推送的后台数据，将对应状态的图标颜色更改，以提示用户该设备状态变化。

全局报警信息在接收后台数据后，对应变化报警数目，并且在提示页面的报警条目对应的添加和删除。
